{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/OneDrive/M%C3%A1y%20t%C3%ADnh/personal%20project/Real-Time%20Board%20Managemenr%20Tool/frontend/src/app/dashboard/card/page.jsx"],"sourcesContent":["\r\n\"use client\";\r\n\r\nimport Button from \"@/components/componentTag/button\";\r\nimport React, { useState } from \"react\";\r\nimport { useRouter} from \"next/navigation\";\r\nimport apiClient from \"@/app/api/\";\r\nimport API from \"@/api/apiRoutes\";\r\n\r\nexport default function CardPage() {\r\n\r\n    const router = useRouter();\r\n\r\n    const [showAddModal, setShowAddModal] = useState(false);\r\n    const [newTitle, setNewTitle] = useState(false);\r\n    const [cards, setCards] = useState([]);\r\n\r\n    const handleCreateCard = () => {\r\n        setShowAddModal(true);\r\n    }\r\n\r\n// Lấy danh sách card của user\r\n  const fetchCards = async () => {\r\n    try {\r\n      const res = await apiClient.get(API.cards.byUser(\"me\")); // \"me\" sẽ được backend hiểu là người đang đăng nhập\r\n      setCards(res.data);\r\n    } catch (err) {\r\n      console.error(\"Lỗi lấy danh sách card:\", err);\r\n    }\r\n  };\r\n\r\n  // Thêm card mới\r\n  const handleAddCard = async () => {\r\n    if (newTitle.trim() === \"\") return;\r\n\r\n    try {\r\n      await apiClient.post(API.cards.add, {\r\n        name: newTitle,\r\n        description: \"Mô tả mặc định\"\r\n      });\r\n      setNewTitle(\"\");\r\n      setShowAddModal(false);\r\n      fetchCards(); // reload danh sách\r\n    } catch (err) {\r\n      console.error(\"Lỗi thêm card:\", err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCards();\r\n  }, []);\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"p-4 h-full flex flex-col bg-purple-300 rounded-lg\">\r\n        <div className=\"flex justify-end mb-2\">\r\n            <Button \r\n                label={\"+ Card\"}\r\n                onClick={handleCreateCard}\r\n                className={\"w-[81px] h-[30px] flex justify-center items-center\"}\r\n            />\r\n        </div>\r\n        <div className=\"grid lg:grid-cols-3 gap-2\">\r\n            {cards.map((card) => (\r\n                <div \r\n                    key={card.id}\r\n                    className=\"grid grid-cols-[3fr_1fr] bg-blue-200 rounded-lg p-2\"    \r\n                >\r\n                    <div className=\"mr-2\">\r\n                        <div className=\"flex flex-rows\">\r\n                            <p>Name:</p>\r\n                            <h2>{card.nameCard}</h2>\r\n                        </div>\r\n                        <div className=\"flex flex-rows\">\r\n                            <p>Number of tasks:</p>\r\n                            <p>{card.numberOfTasks}</p>\r\n                        </div>\r\n                    </div>\r\n                    <Button \r\n                        label={\"detail\"}\r\n                        onClick={() => router.push(`/dashboard/card/${card.id}`)}\r\n                        className=\"w-[75px] h-[30px] flex justify-center items-center\"    \r\n                    /> \r\n                </div>\r\n            ))}\r\n        </div>\r\n\r\n\r\n        {showAddModal && (\r\n        <div className=\"fixed inset-0 backdrop-blur-xs bg-opacity-10 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white p-6 rounded shadow-lg w-[300px] space-y-4\">\r\n            <h2 className=\"text-lg font-bold\">Nhập tên Card</h2>\r\n            <input\r\n              type=\"text\"\r\n              value={newTitle}\r\n              onChange={(e) => setNewTitle(e.target.value)}\r\n              className=\"w-full border px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-300\"\r\n              placeholder=\"Tên card...\"\r\n            />\r\n            <div className=\"flex justify-end gap-2\">\r\n              <button\r\n                onClick={() => setShowModal(false)}\r\n                className=\"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400\"\r\n              >\r\n                Hủy\r\n              </button>\r\n              <button\r\n                onClick={handleAddCard}\r\n                className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\r\n              >\r\n                OK\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;;;;;;;;;;;AAJA;;;;;;;AAQe,SAAS;IAEpB,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAErC,MAAM,mBAAmB;QACrB,gBAAgB;IACpB;IAEJ,8BAA8B;IAC5B,MAAM,aAAa;QACjB,IAAI;YACF,MAAM,MAAM,MAAM,UAAU,GAAG,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,QAAQ,oDAAoD;YAC7G,SAAS,IAAI,IAAI;QACnB,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,2BAA2B;QAC3C;IACF;IAEA,gBAAgB;IAChB,MAAM,gBAAgB;QACpB,IAAI,SAAS,IAAI,OAAO,IAAI;QAE5B,IAAI;YACF,MAAM,UAAU,IAAI,CAAC,IAAI,KAAK,CAAC,GAAG,EAAE;gBAClC,MAAM;gBACN,aAAa;YACf;YACA,YAAY;YACZ,gBAAgB;YAChB,cAAc,mBAAmB;QACnC,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,kBAAkB;QAClC;IACF;IAEA,UAAU;QACR;IACF,GAAG,EAAE;IAIL,qBACE,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC,uJAAM;oBACH,OAAO;oBACP,SAAS;oBACT,WAAW;;;;;;;;;;;0BAGnB,8OAAC;gBAAI,WAAU;0BACV,MAAM,GAAG,CAAC,CAAC,qBACR,8OAAC;wBAEG,WAAU;;0CAEV,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;0DAAE;;;;;;0DACH,8OAAC;0DAAI,KAAK,QAAQ;;;;;;;;;;;;kDAEtB,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;0DAAE;;;;;;0DACH,8OAAC;0DAAG,KAAK,aAAa;;;;;;;;;;;;;;;;;;0CAG9B,8OAAC,uJAAM;gCACH,OAAO;gCACP,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,gBAAgB,EAAE,KAAK,EAAE,EAAE;gCACvD,WAAU;;;;;;;uBAhBT,KAAK,EAAE;;;;;;;;;;YAuBvB,8BACD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAoB;;;;;;sCAClC,8OAAC;4BACC,MAAK;4BACL,OAAO;4BACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4BAC3C,WAAU;4BACV,aAAY;;;;;;sCAEd,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,SAAS,IAAM,aAAa;oCAC5B,WAAU;8CACX;;;;;;8CAGD,8OAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUf","debugId":null}}]
}